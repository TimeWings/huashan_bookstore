String brokerIP = "tcp://127.0.0.1:1883";		
			String clientId = user.getName();
			//发给订阅了email的客户端;
			String pub_topic = "email";
			//发送的信息为;
			String msg = "Email:"+email + "\n" 
					     +"Name:" +user.getName() + "\n"
					     +"要发送的邮件信息:"+user.toString();
					
			MemoryPersistence persistence = new MemoryPersistence();
			
			 try {
				 
				MqttClient sampleClient= new MqttClient(brokerIP, clientId, persistence);
				MqttConnectOptions connOpts = new MqttConnectOptions();
				connOpts.setCleanSession(true);
				//尝试连接
				System.out.println("Connecting to broker: "+brokerIP);
				sampleClient.connect(connOpts);
				//提示是否连接成功;
				System.out.println("Connected....已连接");
				
				//将内容转为二进制流;
				MqttMessage message = new MqttMessage(msg.getBytes());
				
				//选择优先级别;设置优先级别;
				message.setQos(1); 
				
				//发送主题和信息，publish("主题","信息的二进制").......
				sampleClient.publish(pub_topic, message);
				
				//断开连接;
				sampleClient.disconnect();
			} catch (MqttException me) {
				//出现异常则处理......
				System.out.println("reason "+me.getReasonCode());
				System.out.println("msg "+me.getMessage());
			    System.out.println("loc "+me.getLocalizedMessage());
				System.out.println("cause "+me.getCause());
				System.out.println("excep "+me);
				me.printStackTrace();
			}				
			System.out.println("注册成功......");